import{d as N,r as v,a as V,c as b,w as I,b as l,o as r,e as t,f as U,g as u,h as _,t as i,v as y,F as d,i as c,j as M,k as A,u as $,l as q}from"./app-CadrZDUH.js";import{L as f,T as B}from"./index-BG5Ynpes.js";import{d as k,g as w,a as j}from"./languageDetector-BLh69cU_.js";const F={class:"max-w-4xl mx-auto"},P={class:"bg-white rounded-lg shadow-md p-6"},G={class:"flex items-center space-x-2 mb-2"},H={key:0,class:"text-sm text-gray-500"},J={label:"–û—Å–Ω–æ–≤–Ω—ã–µ —è–∑—ã–∫–∏"},K=["value"],R={label:"–°–º–µ—à–∞–Ω–Ω—ã–µ —Ç–∏–ø—ã"},X=["value"],z={label:"–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —è–∑—ã–∫–∏"},Q=["value"],W={key:0,class:"mt-2"},Y={class:"flex flex-wrap gap-1"},Z=["onClick"],ee=["value"],te={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},se={class:"flex items-center"},oe={class:"flex justify-end"},ne=["disabled"],ue=N({__name:"CodeCreate",setup(ae){const p=v(!1),m=v(0),g=v([]),o=V({content:"",language:"php",theme:"vs-dark",is_encrypted:!1,expires_at:""}),O=b(()=>{const n=["php","javascript","python","java","csharp","cpp","go","rust","typescript","html","css","sql"];return Object.fromEntries(Object.entries(f).filter(([e])=>n.includes(e)))}),L=b(()=>{const n=["php-html","vue","blade","jsx","tsx","html-css","html-js","php-blade"];return Object.fromEntries(Object.entries(f).filter(([e])=>n.includes(e)))}),E=b(()=>{const n=["ruby","swift","kotlin","scala","dart","elixir","haskell","clojure","bash","powershell","yaml","json","xml","markdown"];return Object.fromEntries(Object.entries(f).filter(([e])=>n.includes(e)))}),S=b(()=>B);let x=null;const T=()=>{x&&clearTimeout(x),x=setTimeout(()=>{o.content.trim()&&h()},1e3)},h=()=>{if(!o.content.trim()){alert("–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –¥–ª—è –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —è–∑—ã–∫–∞");return}const n=k(o.content),e=w(o.content,n),s=j(o.content,n);o.language=n,m.value=e,g.value=s,console.log("–ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:",{detectedLanguage:n,confidence:e,alternatives:s,content:o.content.substring(0,100)+"..."})};I(()=>o.content,n=>{if(n.trim()&&n.length>10){const e=k(n),s=w(n,e),a=j(n,e);s>60&&(o.language=e),m.value=s,g.value=a}},{deep:!0});const D=async()=>{if(!o.content.trim()){alert("–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥");return}p.value=!0;try{const n={content:o.content,language:o.language,theme:o.theme,is_encrypted:o.is_encrypted,expires_at:o.expires_at?C(o.expires_at):null},e=await fetch("/api/codes",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify(n)});if(e.ok){const s=await e.json();s.data.edit_token?alert(`–°–Ω–∏–ø–ø–µ—Ç —Å–æ–∑–¥–∞–Ω!

–°—Å—ã–ª–∫–∞: ${s.data.url}
–¢–æ–∫–µ–Ω –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: ${s.data.edit_token}

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω! –û–Ω –Ω—É–∂–µ–Ω –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–Ω–∏–ø–ø–µ—Ç–∞.`):alert("–°–Ω–∏–ø–ø–µ—Ç —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ!"),q.visit(`/code/${s.data.hash}`)}else{const s=await e.json();throw new Error(s.message||"–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–Ω–∏–ø–ø–µ—Ç–∞")}}catch(n){console.error("Error:",n),alert(n instanceof Error?n.message:"–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–Ω–∏–ø–ø–µ—Ç–∞")}finally{p.value=!1}},C=n=>{const e=new Date;return e.setDate(e.getDate()+parseInt(n)),e.toISOString()};return(n,e)=>(r(),l("div",F,[e[12]||(e[12]=t("div",{class:"text-center mb-8"},[t("h1",{class:"text-4xl font-bold text-gray-900 mb-4"}," –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å–Ω–∏–ø–ø–µ—Ç "),t("p",{class:"text-xl text-gray-600"}," –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–Ω–∏–ø–ø–µ—Ç–∞ ")],-1)),t("div",P,[t("form",{onSubmit:U(D,["prevent"]),class:"space-y-4"},[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," –Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è ",-1)),t("div",G,[t("button",{type:"button",onClick:h,class:"text-sm text-blue-600 hover:text-blue-800 underline"}," üîç –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ "),m.value>0?(r(),l("span",H," –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: "+i(m.value)+"% ",1)):_("",!0)]),u(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.language=s),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[t("optgroup",J,[(r(!0),l(d,null,c(O.value,(s,a)=>(r(),l("option",{key:a,value:a},i(s),9,K))),128))]),t("optgroup",R,[(r(!0),l(d,null,c(L.value,(s,a)=>(r(),l("option",{key:a,value:a},i(s),9,X))),128))]),t("optgroup",z,[(r(!0),l(d,null,c(E.value,(s,a)=>(r(),l("option",{key:a,value:a},i(s),9,Q))),128))])],512),[[y,o.language]]),g.value.length>0?(r(),l("div",W,[e[5]||(e[5]=t("p",{class:"text-xs text-gray-500 mb-1"},"–í–æ–∑–º–æ–∂–Ω—ã–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:",-1)),t("div",Y,[(r(!0),l(d,null,c(g.value,s=>(r(),l("button",{key:s,type:"button",onClick:a=>o.language=s,class:"text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded"},i($(f)[s]),9,Z))),128))])])):_("",!0)]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," –¢–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è ",-1)),u(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.theme=s),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[(r(!0),l(d,null,c(S.value,(s,a)=>(r(),l("option",{key:a,value:a},i(s),9,ee))),128))],512),[[y,o.theme]])]),t("div",te,[t("div",null,[t("label",se,[u(t("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=s=>o.is_encrypted=s),class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[M,o.is_encrypted]]),e[8]||(e[8]=t("span",{class:"ml-2 text-sm text-gray-700"},"–ó–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å —Å–Ω–∏–ø–ø–µ—Ç",-1))])]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ ",-1)),u(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>o.expires_at=s),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},e[9]||(e[9]=[t("option",{value:""},"–ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π",-1),t("option",{value:"1"},"1 –¥–µ–Ω—å",-1),t("option",{value:"7"},"7 –¥–Ω–µ–π",-1),t("option",{value:"30"},"30 –¥–Ω–µ–π",-1)]),512),[[y,o.expires_at]])])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," –ö–æ–¥ ",-1)),u(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=s=>o.content=s),onInput:T,rows:"12",placeholder:"–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –∫–æ–¥ –∑–¥–µ—Å—å...",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm"},null,544),[[A,o.content]])]),t("div",oe,[t("button",{type:"submit",disabled:p.value,class:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50"},i(p.value?"–°–æ–∑–¥–∞–Ω–∏–µ...":"–°–æ–∑–¥–∞—Ç—å —Å–Ω–∏–ø–ø–µ—Ç"),9,ne)])],32)])]))}});export{ue as default};
