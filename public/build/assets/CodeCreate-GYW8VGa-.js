import{d as k,r as j,a as O,c,b as r,o as a,e as t,w as E,f as i,v as b,F as p,g as m,h as S,q as D,t as u,u as T}from"./app-3qNf4nrR.js";import{L as g,T as L}from"./index-BG5Ynpes.js";const C={class:"max-w-4xl mx-auto"},N={class:"bg-white rounded-lg shadow-md p-6"},U={label:"Основные языки"},V=["value"],M={label:"Смешанные типы"},q=["value"],I={label:"Дополнительные языки"},A=["value"],B=["value"],F={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},P={class:"flex items-center"},$={class:"flex justify-end"},G=["disabled"],K=k({__name:"CodeCreate",setup(R){const f=T(),d=j(!1),o=O({content:"",language:"php",theme:"vs-dark",is_encrypted:!1,expires_at:""}),x=c(()=>{const n=["php","javascript","python","java","csharp","cpp","go","rust","typescript","html","css","sql"];return Object.fromEntries(Object.entries(g).filter(([e])=>n.includes(e)))}),y=c(()=>{const n=["php-html","vue","blade","jsx","tsx","html-css","html-js","php-blade"];return Object.fromEntries(Object.entries(g).filter(([e])=>n.includes(e)))}),v=c(()=>{const n=["ruby","swift","kotlin","scala","dart","elixir","haskell","clojure","bash","powershell","yaml","json","xml","markdown"];return Object.fromEntries(Object.entries(g).filter(([e])=>n.includes(e)))}),h=c(()=>L),_=async()=>{if(!o.content.trim()){alert("Введите код");return}d.value=!0;try{const n={content:o.content,language:o.language,theme:o.theme,is_encrypted:o.is_encrypted,expires_at:o.expires_at?w(o.expires_at):null},e=await fetch("/api/codes",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify(n)});if(e.ok){const s=await e.json();s.data.edit_token?alert(`Сниппет создан!

Ссылка: ${s.data.url}
Токен для редактирования: ${s.data.edit_token}

Сохраните токен! Он нужен для редактирования сниппета.`):alert("Сниппет создан успешно!"),f.push(`/code/${s.data.hash}`)}else{const s=await e.json();throw new Error(s.message||"Ошибка создания сниппета")}}catch(n){console.error("Error:",n),alert(n instanceof Error?n.message:"Ошибка создания сниппета")}finally{d.value=!1}},w=n=>{const e=new Date;return e.setDate(e.getDate()+parseInt(n)),e.toISOString()};return(n,e)=>(a(),r("div",C,[e[11]||(e[11]=t("div",{class:"text-center mb-8"},[t("h1",{class:"text-4xl font-bold text-gray-900 mb-4"}," Создать новый сниппет "),t("p",{class:"text-xl text-gray-600"}," Создайте зашифрованный сниппет кода для обмена с коллегами ")],-1)),t("div",N,[t("form",{onSubmit:E(_,["prevent"]),class:"space-y-4"},[t("div",null,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Язык программирования ",-1)),i(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.language=s),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[t("optgroup",U,[(a(!0),r(p,null,m(x.value,(s,l)=>(a(),r("option",{key:l,value:l},u(s),9,V))),128))]),t("optgroup",M,[(a(!0),r(p,null,m(y.value,(s,l)=>(a(),r("option",{key:l,value:l},u(s),9,q))),128))]),t("optgroup",I,[(a(!0),r(p,null,m(v.value,(s,l)=>(a(),r("option",{key:l,value:l},u(s),9,A))),128))])],512),[[b,o.language]])]),t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Тема оформления ",-1)),i(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.theme=s),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[(a(!0),r(p,null,m(h.value,(s,l)=>(a(),r("option",{key:l,value:l},u(s),9,B))),128))],512),[[b,o.theme]])]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Код ",-1)),i(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=s=>o.content=s),rows:"12",placeholder:"Введите ваш код здесь...",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm"},null,512),[[S,o.content]])]),t("div",F,[t("div",null,[t("label",P,[i(t("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=s=>o.is_encrypted=s),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[D,o.is_encrypted]]),e[8]||(e[8]=t("span",{class:"ml-2 text-sm text-gray-700"},"Включить шифрование",-1))])]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Время истечения ",-1)),i(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>o.expires_at=s),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},e[9]||(e[9]=[t("option",{value:""},"Без ограничений",-1),t("option",{value:"1"},"1 день",-1),t("option",{value:"7"},"7 дней",-1),t("option",{value:"30"},"30 дней",-1)]),512),[[b,o.expires_at]])])]),t("div",$,[t("button",{type:"submit",disabled:d.value,class:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50"},u(d.value?"Создание...":"Создать сниппет"),9,G)])],32)])]))}});export{K as default};
