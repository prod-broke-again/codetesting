import{d as f,r as d,l as y,b as n,o as l,h as m,e,m as w,t as a,n as b,p as k,q as N,s as C}from"./app-FdYdPeF2.js";import{L as T,T as E}from"./index-BG5Ynpes.js";const S={class:"max-w-6xl mx-auto"},V={key:0,class:"text-center py-8"},j={key:1,class:"text-center py-8"},D={class:"text-red-600 text-xl mb-4"},L={key:2,class:"space-y-6"},O={class:"bg-white rounded-lg shadow-md p-6"},B={class:"flex justify-between items-start"},U={class:"flex items-center space-x-4 text-sm text-gray-600"},A={key:0},G={class:"bg-white rounded-lg shadow-md overflow-hidden"},I={class:"bg-gray-800 px-4 py-2 flex justify-between items-center"},M={class:"text-white font-mono text-sm"},P={class:"flex items-center space-x-2"},R={class:"text-gray-400 text-xs"},q={class:"p-4"},H={class:"bg-gray-900 text-gray-100 p-4 rounded-md overflow-x-auto"},$={class:"bg-white rounded-lg shadow-md p-6"},z={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},F={class:"ml-2"},J={class:"ml-2 font-mono"},K={class:"ml-2"},Q={class:"ml-2"},Z=f({__name:"CodeView",setup(W){const v=C(),c=d(!0),r=d(""),o=d(null),_=async()=>{try{const t=await fetch(`/api/codes/${v.params.hash}`);if(!t.ok){const i=await t.json();throw new Error(i.message||"Сниппет не найден")}const s=await t.json();o.value=s.data}catch(t){r.value=t instanceof Error?t.message:"Ошибка загрузки сниппета"}finally{c.value=!1}},x=async()=>{if(o.value)try{await navigator.clipboard.writeText(o.value.content),alert("Код скопирован в буфер обмена")}catch(t){console.error("Ошибка копирования:",t)}},g=async()=>{try{await navigator.clipboard.writeText(window.location.href),alert("Ссылка скопирована в буфер обмена")}catch(t){console.error("Ошибка копирования:",t)}},u=t=>T[t]||t,h=t=>E[t]||t,p=t=>new Date(t).toLocaleString("ru-RU");return y(()=>{_()}),(t,s)=>{const i=N("router-link");return l(),n("div",S,[c.value?(l(),n("div",V,s[0]||(s[0]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Загрузка сниппета...",-1)]))):r.value?(l(),n("div",j,[e("div",D,a(r.value),1),w(i,{to:"/",class:"text-blue-600 hover:underline"},{default:b(()=>s[1]||(s[1]=[k(" Вернуться на главную ",-1)])),_:1,__:[1]})])):o.value?(l(),n("div",L,[e("div",O,[e("div",B,[e("div",null,[s[2]||(s[2]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-2"}," Сниппет кода ",-1)),e("div",U,[e("span",null,"Язык: "+a(u(o.value.language)),1),e("span",null,"Тема: "+a(h(o.value.theme)),1),e("span",null,"Просмотров: "+a(o.value.access_count),1),o.value.expires_at?(l(),n("span",A," Истекает: "+a(p(o.value.expires_at)),1)):m("",!0)])]),e("div",{class:"flex space-x-2"},[e("button",{onClick:x,class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700"}," Копировать код "),e("button",{onClick:g,class:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700"}," Копировать ссылку ")])])]),e("div",G,[e("div",I,[e("span",M,a(u(o.value.language)),1),e("div",P,[e("span",R,a(o.value.language),1)])]),e("div",q,[e("pre",H,[e("code",null,a(o.value.content),1)])])]),e("div",$,[s[7]||(s[7]=e("h3",{class:"text-lg font-semibold mb-4"},"Информация о сниппете",-1)),e("div",z,[e("div",null,[s[3]||(s[3]=e("span",{class:"font-medium"},"Создан:",-1)),e("span",F,a(p(o.value.created_at)),1)]),e("div",null,[s[4]||(s[4]=e("span",{class:"font-medium"},"Хеш:",-1)),e("span",J,a(o.value.hash),1)]),e("div",null,[s[5]||(s[5]=e("span",{class:"font-medium"},"Шифрование:",-1)),e("span",K,a(o.value.is_encrypted?"Включено":"Отключено"),1)]),e("div",null,[s[6]||(s[6]=e("span",{class:"font-medium"},"Тип:",-1)),e("span",Q,a(o.value.is_guest?"Гостевой":"Зарегистрированный"),1)])])])])):m("",!0)])}}});export{Z as default};
