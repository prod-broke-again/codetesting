import{d as S,r as v,a as C,c as m,w as N,b as a,o as l,e as t,f as V,g as y,h,t as u,v as _,F as i,i as c,j as A,u as D,k as I}from"./app-D40RM7se.js";import{L as p,T as M}from"./index-BG5Ynpes.js";import{d as U,g as B,a as F}from"./languageDetector-BO8hPkXD.js";const P={class:"max-w-4xl mx-auto"},q={class:"bg-white rounded-lg shadow-md p-6"},G={class:"flex items-center space-x-2 mb-2"},H={key:0,class:"text-sm text-gray-500"},R={label:"–û—Å–Ω–æ–≤–Ω—ã–µ —è–∑—ã–∫–∏"},$=["value"],J={label:"–°–º–µ—à–∞–Ω–Ω—ã–µ —Ç–∏–ø—ã"},K=["value"],X={label:"–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —è–∑—ã–∫–∏"},z=["value"],Q={key:0,class:"mt-2"},W={class:"flex flex-wrap gap-1"},Y=["onClick"],Z=["value"],ee={class:"flex justify-end"},te=["disabled"],le=S({__name:"Home",setup(se){const k=D(),d=v(!1),b=v(0),g=v([]),n=C({content:"",language:"php",theme:"vs-dark"}),w=m(()=>{const o=["php","javascript","python","java","csharp","cpp","go","rust","typescript","html","css","sql"];return Object.fromEntries(Object.entries(p).filter(([e])=>o.includes(e)))}),j=m(()=>{const o=["php-html","vue","blade","jsx","tsx","html-css","html-js","php-blade"];return Object.fromEntries(Object.entries(p).filter(([e])=>o.includes(e)))}),O=m(()=>{const o=["ruby","swift","kotlin","scala","dart","elixir","haskell","clojure","bash","powershell","yaml","json","xml","markdown"];return Object.fromEntries(Object.entries(p).filter(([e])=>o.includes(e)))}),L=m(()=>M);let f=null;const T=()=>{f&&clearTimeout(f),f=setTimeout(()=>{n.content.trim()&&x()},1e3)},x=()=>{if(!n.content.trim())return;const o=U(n.content),e=B(n.content,o),s=F(n.content,o);e>60&&(n.language=o),b.value=e,g.value=s};N(()=>n.content,o=>{o.trim()&&o.length>10&&x()},{deep:!0});const E=async()=>{if(!n.content.trim()){alert("–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥");return}d.value=!0;try{const o=await fetch("/api/codes",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify(n)});if(o.ok){const e=await o.json();k.push(`/code/${e.hash}`)}else throw new Error("–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–Ω–∏–ø–ø–µ—Ç–∞")}catch(o){console.error("Error:",o),alert("–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–Ω–∏–ø–ø–µ—Ç–∞")}finally{d.value=!1}};return(o,e)=>(l(),a("div",P,[e[8]||(e[8]=t("div",{class:"text-center mb-8"},[t("h1",{class:"text-4xl font-bold text-gray-900 mb-4"}," –î–µ–ª–∏—Ç–µ—Å—å –∫–æ–¥–æ–º –±–µ–∑–æ–ø–∞—Å–Ω–æ "),t("p",{class:"text-xl text-gray-600"}," –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–Ω–∏–ø–ø–µ—Ç—ã –∫–æ–¥–∞ –∏ –¥–µ–ª–∏—Ç–µ—Å—å –∏–º–∏ —Å –∫–æ–ª–ª–µ–≥–∞–º–∏ ")],-1)),t("div",q,[e[7]||(e[7]=t("h2",{class:"text-2xl font-semibold mb-4"},"–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å–Ω–∏–ø–ø–µ—Ç",-1)),t("form",{onSubmit:V(E,["prevent"]),class:"space-y-4"},[t("div",null,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," –Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è ",-1)),t("div",G,[t("button",{type:"button",onClick:x,class:"text-sm text-blue-600 hover:text-blue-800 underline"}," üîç –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ "),b.value>0?(l(),a("span",H," –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: "+u(b.value)+"% ",1)):h("",!0)]),y(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>n.language=s),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[t("optgroup",R,[(l(!0),a(i,null,c(w.value,(s,r)=>(l(),a("option",{key:r,value:r},u(s),9,$))),128))]),t("optgroup",J,[(l(!0),a(i,null,c(j.value,(s,r)=>(l(),a("option",{key:r,value:r},u(s),9,K))),128))]),t("optgroup",X,[(l(!0),a(i,null,c(O.value,(s,r)=>(l(),a("option",{key:r,value:r},u(s),9,z))),128))])],512),[[_,n.language]]),g.value.length>0?(l(),a("div",Q,[e[3]||(e[3]=t("p",{class:"text-xs text-gray-500 mb-1"},"–í–æ–∑–º–æ–∂–Ω—ã–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:",-1)),t("div",W,[(l(!0),a(i,null,c(g.value,s=>(l(),a("button",{key:s,type:"button",onClick:r=>n.language=s,class:"text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded"},u(I(p)[s]),9,Y))),128))])])):h("",!0)]),t("div",null,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," –¢–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è ",-1)),y(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>n.theme=s),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[(l(!0),a(i,null,c(L.value,(s,r)=>(l(),a("option",{key:r,value:r},u(s),9,Z))),128))],512),[[_,n.theme]])]),t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," –ö–æ–¥ ",-1)),y(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=s=>n.content=s),onInput:T,rows:"12",placeholder:"–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –∫–æ–¥ –∑–¥–µ—Å—å...",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm"},null,544),[[A,n.content]])]),t("div",ee,[t("button",{type:"submit",disabled:d.value,class:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50"},u(d.value?"–°–æ–∑–¥–∞–Ω–∏–µ...":"–°–æ–∑–¥–∞—Ç—å —Å–Ω–∏–ø–ø–µ—Ç"),9,te)])],32)])]))}});export{le as default};
