import{d as C,r as v,a as V,n as g,p as A,c as l,o as r,e as s,t as i,w as D,g as x,f as h,q as _,F as u,s as c,v as I,u as M,m as U}from"./app-C6m9rulp.js";import{L as b,T as q}from"./index-BG5Ynpes.js";import{d as k,g as w,a as j}from"./languageDetector-BLh69cU_.js";const B={class:"max-w-4xl mx-auto"},F={class:"text-center mb-8"},P={class:"text-4xl font-bold text-gray-900 mb-4"},G={class:"text-xl text-gray-600"},H={class:"bg-white rounded-lg shadow-md p-6"},$={class:"flex items-center space-x-2 mb-2"},J={key:0,class:"text-sm text-gray-500"},K={label:"–û—Å–Ω–æ–≤–Ω—ã–µ —è–∑—ã–∫–∏"},R=["value"],X={label:"–°–º–µ—à–∞–Ω–Ω—ã–µ —Ç–∏–ø—ã"},z=["value"],Q={label:"–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —è–∑—ã–∫–∏"},W=["value"],Y={key:0,class:"mt-2"},Z={class:"flex flex-wrap gap-1"},ee=["onClick"],te=["value"],se={class:"flex justify-end"},oe=["disabled"],ie=C({__name:"Home",props:{title:{},description:{}},setup(ne){const d=v(!1),m=v(0),p=v([]),n=V({content:"",language:"php",theme:"vs-dark"}),O=g(()=>{const t=["php","javascript","python","java","csharp","cpp","go","rust","typescript","html","css","sql"];return Object.fromEntries(Object.entries(b).filter(([e])=>t.includes(e)))}),L=g(()=>{const t=["php-html","vue","blade","jsx","tsx","html-css","html-js","php-blade"];return Object.fromEntries(Object.entries(b).filter(([e])=>t.includes(e)))}),T=g(()=>{const t=["ruby","swift","kotlin","scala","dart","elixir","haskell","clojure","bash","powershell","yaml","json","xml","markdown"];return Object.fromEntries(Object.entries(b).filter(([e])=>t.includes(e)))}),E=g(()=>q);let f=null;const S=()=>{f&&clearTimeout(f),f=setTimeout(()=>{n.content.trim()&&y()},1e3)},y=()=>{if(!n.content.trim()){alert("–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –¥–ª—è –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —è–∑—ã–∫–∞");return}const t=k(n.content),e=w(n.content,t),o=j(n.content,t);n.language=t,m.value=e,p.value=o,console.log("–ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:",{detectedLanguage:t,confidence:e,alternatives:o,content:n.content.substring(0,100)+"..."})};A(()=>n.content,t=>{if(t.trim()&&t.length>10){const e=k(t),o=w(t,e),a=j(t,e);o>60&&(n.language=e),m.value=o,p.value=a}},{deep:!0});const N=async()=>{if(!n.content.trim()){alert("–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥");return}d.value=!0;try{const t=await fetch("/api/codes",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify(n)});if(t.ok){const e=await t.json();U.visit(`/code/${e.data.hash}`)}else throw new Error("–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–Ω–∏–ø–ø–µ—Ç–∞")}catch(t){console.error("Error:",t),alert("–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–Ω–∏–ø–ø–µ—Ç–∞")}finally{d.value=!1}};return(t,e)=>(r(),l("div",B,[s("div",F,[s("h1",P,i(t.title),1),s("p",G,i(t.description),1)]),s("div",H,[e[7]||(e[7]=s("h2",{class:"text-2xl font-semibold mb-4"},"–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å–Ω–∏–ø–ø–µ—Ç",-1)),s("form",{onSubmit:D(N,["prevent"]),class:"space-y-4"},[s("div",null,[e[4]||(e[4]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," –Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è ",-1)),s("div",$,[s("button",{type:"button",onClick:y,class:"text-sm text-blue-600 hover:text-blue-800 underline"}," üîç –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ "),m.value>0?(r(),l("span",J," –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: "+i(m.value)+"% ",1)):h("",!0)]),x(s("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>n.language=o),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[s("optgroup",K,[(r(!0),l(u,null,c(O.value,(o,a)=>(r(),l("option",{key:a,value:a},i(o),9,R))),128))]),s("optgroup",X,[(r(!0),l(u,null,c(L.value,(o,a)=>(r(),l("option",{key:a,value:a},i(o),9,z))),128))]),s("optgroup",Q,[(r(!0),l(u,null,c(T.value,(o,a)=>(r(),l("option",{key:a,value:a},i(o),9,W))),128))])],512),[[_,n.language]]),p.value.length>0?(r(),l("div",Y,[e[3]||(e[3]=s("p",{class:"text-xs text-gray-500 mb-1"},"–í–æ–∑–º–æ–∂–Ω—ã–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:",-1)),s("div",Z,[(r(!0),l(u,null,c(p.value,o=>(r(),l("button",{key:o,type:"button",onClick:a=>n.language=o,class:"text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded"},i(M(b)[o]),9,ee))),128))])])):h("",!0)]),s("div",null,[e[5]||(e[5]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," –¢–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è ",-1)),x(s("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>n.theme=o),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[(r(!0),l(u,null,c(E.value,(o,a)=>(r(),l("option",{key:a,value:a},i(o),9,te))),128))],512),[[_,n.theme]])]),s("div",null,[e[6]||(e[6]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," –ö–æ–¥ ",-1)),x(s("textarea",{"onUpdate:modelValue":e[2]||(e[2]=o=>n.content=o),onInput:S,rows:"12",placeholder:"–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –∫–æ–¥ –∑–¥–µ—Å—å...",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm"},null,544),[[I,n.content]])]),s("div",se,[s("button",{type:"submit",disabled:d.value,class:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50"},i(d.value?"–°–æ–∑–¥–∞–Ω–∏–µ...":"–°–æ–∑–¥–∞—Ç—å —Å–Ω–∏–ø–ø–µ—Ç"),9,oe)])],32)])]))}});export{ie as default};
