import{d as U,r as f,e as w,j as n,k as l,m as h,l as s,u as d,t as a,q as b,v as p,y as c,F as V,I as D,x as F,G as k}from"./app-BQPsQsf4.js";import{N,L as E,_ as $}from"./Navigation-C_LxOsvl.js";import{F as j}from"./Footer-T-5AUwyB.js";import"./theme-DFLdFs7o.js";import"./UserIcon-C9GvJ2Vj.js";const q={class:"profile-container"},A={class:"profile-content"},B={class:"profile-header"},M={class:"profile-title"},O={class:"profile-description"},P={class:"profile-grid"},G={class:"profile-section"},I={class:"section-card"},z={class:"user-info"},T={class:"user-avatar"},R=["src","alt"],H={key:1,class:"avatar-placeholder"},J={class:"user-details"},K={class:"user-name"},Q={class:"user-email"},W={class:"user-joined"},X={class:"profile-section"},Y={class:"section-card"},Z={class:"stats-grid"},x={class:"stat-item"},ss={class:"stat-value"},es={class:"stat-item"},ts={class:"stat-value"},os={class:"stat-item"},as={class:"stat-value"},is={class:"stat-item"},ns={class:"stat-value"},ls={class:"profile-section"},rs={class:"section-card"},ds={class:"form-group"},ps={key:0,class:"error-message"},cs={class:"form-group"},us={key:0,class:"error-message"},ms={class:"form-group"},_s={key:0,class:"error-message"},vs={class:"form-group"},fs={key:0,class:"error-message"},ws={class:"form-group"},bs={key:0,class:"error-message"},gs={class:"form-actions"},ys=["disabled"],hs={class:"profile-section"},ks={class:"section-card"},Ss={class:"snippets-list"},Cs={key:0},Ls={class:"snippet-info"},Us={class:"snippet-title"},Vs=["href"],Ds={class:"snippet-meta"},Fs={class:"snippet-language"},Ns={class:"snippet-date"},Es={key:1,class:"empty-section"},$s={class:"profile-section"},js={class:"section-card danger-zone"},qs={class:"danger-content"},As={class:"modal-header"},Bs={class:"modal-body"},Ms={class:"form-group"},Os={key:0,class:"error-message"},Ps={class:"modal-actions"},Gs=["disabled"],Is=U({__name:"Profile",props:{user:{},stats:{},recentSnippets:{},title:{},description:{}},setup(S){const g=S,u=f(!1),m=f(!1),_=f(!1),i=w({name:g.user.name,email:g.user.email,current_password:"",new_password:"",new_password_confirmation:""}),v=w({password:""}),r=w({name:"",email:"",current_password:"",new_password:"",new_password_confirmation:"",password:""}),C=async()=>{u.value=!0;try{await k.put("/profile",i,{onSuccess:()=>{i.current_password="",i.new_password="",i.new_password_confirmation=""},onError:t=>{Object.assign(t,t)},onFinish:()=>{u.value=!1}})}catch(t){console.error("Ошибка:",t),u.value=!1}},L=async()=>{m.value=!0;try{await k.delete("/profile",{data:v,onError:t=>{Object.assign(t,t)},onFinish:()=>{m.value=!1}})}catch(t){console.error("Ошибка:",t),m.value=!1}},y=t=>new Date(t).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric"});return(t,e)=>(l(),n("div",q,[h(N,{user:t.user},null,8,["user"]),s("div",A,[s("div",B,[s("h1",M,a(t.title),1),s("p",O,a(t.description),1)]),s("div",P,[s("div",G,[s("div",I,[e[11]||(e[11]=s("div",{class:"section-header"},[s("h2",{class:"section-title"},"Информация профиля")],-1)),s("div",z,[s("div",T,[t.user.avatar?(l(),n("img",{key:0,src:t.user.avatar,alt:t.user.name,class:"avatar-image"},null,8,R)):(l(),n("div",H,a(t.user.name.charAt(0).toUpperCase()),1))]),s("div",J,[s("h3",K,a(t.user.name),1),s("p",Q,a(t.user.email),1),s("p",W,"Присоединился "+a(y(t.user.created_at)),1)])])])]),s("div",X,[s("div",Y,[e[16]||(e[16]=s("div",{class:"section-header"},[s("h2",{class:"section-title"},"Статистика")],-1)),s("div",Z,[s("div",x,[s("div",ss,a(t.stats.total_snippets),1),e[12]||(e[12]=s("div",{class:"stat-label"},"Всего сниппетов",-1))]),s("div",es,[s("div",ts,a(t.stats.public_snippets),1),e[13]||(e[13]=s("div",{class:"stat-label"},"Публичных",-1))]),s("div",os,[s("div",as,a(t.stats.private_snippets),1),e[14]||(e[14]=s("div",{class:"stat-label"},"Приватных",-1))]),s("div",is,[s("div",ns,a(t.stats.total_views),1),e[15]||(e[15]=s("div",{class:"stat-label"},"Просмотров",-1))])])])]),s("div",ls,[s("div",rs,[e[22]||(e[22]=s("div",{class:"section-header"},[s("h2",{class:"section-title"},"Редактировать профиль")],-1)),s("form",{onSubmit:b(C,["prevent"]),class:"profile-form"},[s("div",ds,[e[17]||(e[17]=s("label",{for:"name",class:"form-label"},"Имя",-1)),p(s("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=o=>i.name=o),type:"text",class:"form-input",required:""},null,512),[[c,i.name]]),r.name?(l(),n("span",ps,a(r.name),1)):d("",!0)]),s("div",cs,[e[18]||(e[18]=s("label",{for:"email",class:"form-label"},"Email",-1)),p(s("input",{id:"email","onUpdate:modelValue":e[1]||(e[1]=o=>i.email=o),type:"email",class:"form-input",required:""},null,512),[[c,i.email]]),r.email?(l(),n("span",us,a(r.email),1)):d("",!0)]),s("div",ms,[e[19]||(e[19]=s("label",{for:"current_password",class:"form-label"},"Текущий пароль",-1)),p(s("input",{id:"current_password","onUpdate:modelValue":e[2]||(e[2]=o=>i.current_password=o),type:"password",class:"form-input"},null,512),[[c,i.current_password]]),r.current_password?(l(),n("span",_s,a(r.current_password),1)):d("",!0)]),s("div",vs,[e[20]||(e[20]=s("label",{for:"new_password",class:"form-label"},"Новый пароль",-1)),p(s("input",{id:"new_password","onUpdate:modelValue":e[3]||(e[3]=o=>i.new_password=o),type:"password",class:"form-input"},null,512),[[c,i.new_password]]),r.new_password?(l(),n("span",fs,a(r.new_password),1)):d("",!0)]),s("div",ws,[e[21]||(e[21]=s("label",{for:"new_password_confirmation",class:"form-label"},"Подтверждение пароля",-1)),p(s("input",{id:"new_password_confirmation","onUpdate:modelValue":e[4]||(e[4]=o=>i.new_password_confirmation=o),type:"password",class:"form-input"},null,512),[[c,i.new_password_confirmation]]),r.new_password_confirmation?(l(),n("span",bs,a(r.new_password_confirmation),1)):d("",!0)]),s("div",gs,[s("button",{type:"submit",class:"btn-primary",disabled:u.value},a(u.value?"Сохранение...":"Сохранить изменения"),9,ys)])],32)])]),s("div",hs,[s("div",ks,[e[24]||(e[24]=s("div",{class:"section-header"},[s("h2",{class:"section-title"},"Последние сниппеты"),s("a",{href:"/my-snippets",class:"section-link"},"Посмотреть все")],-1)),s("div",Ss,[t.recentSnippets&&t.recentSnippets.length>0?(l(),n("div",Cs,[(l(!0),n(V,null,D(t.recentSnippets,o=>(l(),n("div",{key:o.id,class:"snippet-item"},[s("div",Ls,[s("h3",Us,[s("a",{href:`/code/${o.hash}`,class:"snippet-link"},a(o.content.substring(0,30))+"... ",9,Vs)]),s("div",Ds,[s("span",Fs,a(F(E)[o.language]||o.language),1),s("span",Ns,a(y(o.created_at)),1)])])]))),128))])):(l(),n("div",Es,e[23]||(e[23]=[s("p",null,"У вас пока нет сниппетов",-1),s("a",{href:"/",class:"btn-primary"},"Создать первый",-1)])))])])]),s("div",$s,[s("div",js,[e[26]||(e[26]=s("div",{class:"section-header"},[s("h2",{class:"section-title"},"Опасная зона")],-1)),s("div",qs,[e[25]||(e[25]=s("p",{class:"danger-description"}," Удаление аккаунта необратимо. Все ваши сниппеты будут удалены. ",-1)),s("button",{onClick:e[5]||(e[5]=o=>_.value=!0),class:"btn-danger"}," Удалить аккаунт ")])])])])]),_.value?(l(),n("div",{key:0,class:"modal-overlay",onClick:e[10]||(e[10]=o=>_.value=!1)},[s("div",{class:"modal-content",onClick:e[9]||(e[9]=b(()=>{},["stop"]))},[s("div",As,[e[28]||(e[28]=s("h3",{class:"modal-title"},"Удалить аккаунт",-1)),s("button",{onClick:e[6]||(e[6]=o=>_.value=!1),class:"modal-close"},e[27]||(e[27]=[s("svg",{class:"modal-close-icon",fill:"currentColor",viewBox:"0 0 20 20"},[s("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))]),s("div",Bs,[e[30]||(e[30]=s("p",null,"Это действие необратимо. Все ваши сниппеты будут удалены.",-1)),s("form",{onSubmit:b(L,["prevent"]),class:"delete-form"},[s("div",Ms,[e[29]||(e[29]=s("label",{for:"delete_password",class:"form-label"},"Введите пароль для подтверждения",-1)),p(s("input",{id:"delete_password","onUpdate:modelValue":e[7]||(e[7]=o=>v.password=o),type:"password",class:"form-input",required:""},null,512),[[c,v.password]]),r.password?(l(),n("span",Os,a(r.password),1)):d("",!0)]),s("div",Ps,[s("button",{type:"button",onClick:e[8]||(e[8]=o=>_.value=!1),class:"btn-secondary"}," Отмена "),s("button",{type:"submit",class:"btn-danger",disabled:m.value},a(m.value?"Удаление...":"Удалить аккаунт"),9,Gs)])],32)])])])):d("",!0),h(j)]))}}),Ks=$(Is,[["__scopeId","data-v-024c3042"]]);export{Ks as default};
